# 2026-02-19：v3.6.0 交付版（One-Step 体验、Policy/Billing/DB、商业发布加固）

本次版本是在 `v3.5.0` 之后的一次集中集成发布，重点覆盖：one-step 交付链路和聊天任务体验加固、Policy 可审计能力、Billing 端到端管线、DB/NLQ 操作面升级、通信通道扩展，以及商业发布与开源边界收敛。

## Commit 证据（v3.5.0..HEAD）

```text
e4e58105  feat(providers): split local/cloud + manage cloud API keys
3ce7413e  chore(wiki/teams): register routers and add governance/wiki scaffolding
d721fc85  feat(communication): expand imessage/teams/whatsapp runtime + UI
44193251  feat(communication): expand imessage/teams/whatsapp runtime + UI
72b7d15f  fix(webui): dedupe wiki service exports
e3ff0af3  feat: consolidate pending changes on master
93e74153  REG-DEMO-BASELINE-ZERO-FAIL: stabilize demos regression
2dc6ace9  DB-UNIFIED-DATA-MODULE: implement db module
43ee2ef1  CHAT-DB-NLQ-SKILL-20260219: add NLQ db.query skill
1080f08b  chore: prune evidence artifacts and ignore runtime evidence
4016d58f  feat(policy): add policy center versioned audit and masking proof baseline
93ad1a2c  feat: close execution visualization sprint and phase5 evidence gates
cebef054  feat(kb): activate governed cognitive precheck and enrichment
a76a8369  feat: deliver end-to-end billing pipeline with evidence bundle
b448a46a  feat(teams-enterprise): add tenant-resilient publish modes, fallback gates, and real-tenant acceptance artifacts
bd1a3edc  feat(one-step): harden autonomous delivery and chat-task UX
```

## 1）One-Step 交付与 Chat/Task 体验加固

交付：
- 加固 one-step 自动交付交互链路与监督证据输出。
- 升级 Chat/Task 关键页面（会话列表、消息渲染、聊天壳层、任务详情）。
- 扩展中英文 i18n 文案，覆盖新增交付流程提示。

关键文件：
- `apps/webui/src/pages/ChatPage.tsx`
- `apps/webui/src/pages/TaskDetailPage.tsx`
- `apps/webui/src/ui/chat/AppChatShell.tsx`
- `apps/webui/src/ui/chat/SessionList.tsx`
- `apps/webui/src/ui/chat/ChatMessage.tsx`
- `contracts/one_step_delivery.openapi.json`
- `docs/prd/one_step_delivery.md`

## 2）Policy Center 审计能力与执行证据闭环

交付：
- 增加 Policy Center 版本化审计能力与策略 diff 可视化。
- 收口执行可视化冲刺并落地 phase-5 证据闸门与任务计划差异 API。
- 新增/增强相关 E2E 与单测，保证策略与执行证据可追溯。

关键文件：
- `apps/webui/src/pages/PolicyCenterPage.tsx`
- `apps/webui/src/pages/PolicyDetailsPage.tsx`
- `apps/webui/src/components/policy/PolicyDiffView.tsx`
- `os/octopusos/webui/api/tasks.py`
- `os/skillos/evidence.py`
- `tests/validation/test_skillos_evidence_bundle.py`

## 3）数据库操作面升级：DB Module + NLQ Skill

交付：
- 新增 DB Module 页面与 API。
- 打通 chat 到安全 NLQ planner/executor 的 `db.query` 技能链路。
- 扩展服务契约与 E2E 覆盖，提升 DB/NLQ 使用稳定性。

关键文件：
- `apps/webui/src/pages/DatabaseModulePage.tsx`
- `apps/webui/src/services/db_module.service.ts`
- `apps/webui/src/services/db_nlq.service.ts`
- `os/octopusos/webui/api/db_module.py`
- `os/octopusos/webui/api/db_nlq.py`
- `os/octopusos/core/db/nlq_planner.py`
- `os/octopusos/core/db/sql_safety.py`
- `apps/webui/tests/e2e/specs/chat-nlq.spec.ts`

## 4）KB 治理预检与增强链路激活

交付：
- 启用 governed cognitive precheck 与 KB enrichment 交付链路。
- 补齐 KB connector 治理 ADR 文档与证据集。

关键文件：
- `docs/adr/ADR_KB_CONNECTORS_GOVERNED.md`
- `evidence/kb/*`（ingest/query/planning 证据包）

## 5）Billing 端到端管线交付

交付：
- 增加桌面端 billing 流程与移动端配套页面。
- 补齐共享 schema/vendor seed 与 real-chain/e2e 脚本。
- 产出 billing 证据包用于发布验证。

关键文件：
- `apps/desktop-billing/src/main.js`
- `apps/mobile/src/App.tsx`
- `packages/shared/schema/email-account.schema.json`
- `scripts/e2e/desktop_flow.mjs`
- `scripts/realchain/run_real_mailbox_readonly.sh`
- `evidence/billing_delivery/*`

## 6）Communication + Providers + Wiki/Teams 扩展

交付：
- 扩展 iMessage/Teams/WhatsApp 的运行时与 UI 支撑。
- Provider 管理拆分 local/cloud，并引入 cloud API key 管理能力。
- 新增 teams/wiki 双语治理与使用文档脚手架。

关键文件：
- `os/communicationos/channels/imessage/adapter.py`
- `os/communicationos/channels/teams/adapter.py`
- `os/communicationos/channels/whatsapp_web.py`
- `os/octopusos/webui/api/providers.py`
- `apps/webui/src/components/providers/CloudProviderConfigDrawer.tsx`
- `docs/teams_wiki/lang/en/index.json`
- `docs/wiki/lang/zh/index.json`

## 7）商业发布模式与开源边界加固

交付：
- 新增租户弹性的企业发布模式与兜底验证闸门。
- 补齐商业交付 runbook/checklist 与 real-tenant 验收产物。
- 强化 `commercial/` 隔离与 OSS 边界 gate。

关键文件：
- `commercial/teams_enterprise/deploy/teams/publish.py`
- `commercial/teams_enterprise/deploy/RUNBOOK_teams_enterprise_publish_modes.md`
- `.github/workflows/teams-enterprise-commercial-gates.yml`
- `.github/workflows/oss-release-boundary-gate.yml`
- `scripts/gates/check_oss_release_boundary.py`

## 8）回归稳定性与仓库清理

交付：
- 稳定 demo 回归基线并修复 wiki service 导出重复问题。
- 清理运行态 evidence 产物并补充忽略规则。

关键文件：
- `demos/claude/edge_cases/*`
- `demos/core/runner.py`
- `apps/webui/src/services/index.ts`
- `.gitignore`
