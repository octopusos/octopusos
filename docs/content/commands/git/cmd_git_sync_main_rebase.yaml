id: cmd_git_sync_main_rebase
type: command
version: 0.8.0
category: git
title: "Sync Main and Rebase Feature Branch"
description: "Sync local main with remote and rebase the current feature branch."

recommended_roles:
  - frontend_engineer
  - backend_engineer

workflow_links:
  - workflow: refactoring
    phases: [pre_change]
  - workflow: feature_implementation
    phases: [setup]

inputs:
  - name: remote_name
    type: string
    required: false
    description: "Remote name, default 'origin'."
  - name: main_branch
    type: string
    required: false
    description: "Main branch name, e.g. 'main' or 'master'."

outputs:
  - name: rebase_status
    type: string
    description: "Outcome: success|conflict|skipped."

preconditions:
  - "repository_accessible"
  - "working_tree_clean"
  - "upstream_reachable"

effects:
  - scope: repo
    kind: write
    description: "Rewrites local branch history via rebase."

risk_level: medium
evidence_required: true

constraints:
  executable_payload: forbidden
  agent_binding: forbidden

lineage:
  introduced_in: v0.8
  derived_from: null
  supersedes: []
